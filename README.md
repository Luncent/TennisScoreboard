# Проект “Табло теннисного матча” #
## Веб-приложение, реализующее табло счёта теннисного матча.

### Java - коллекции, ООП, Паттерн MVC(S), Maven/Gradle  

### Backend

Java Servlets, JSP HTTP - GET и POST запросы, формы, Базы данных - SQL, Hibernate, H2 (in-memory SQL database), Frontend - HTML/CSS, блочная вёрстка, тесты - юнит тестирование, JUnit 5, Деплой - Tomcat

# Функционал приложения #
## Работа с матчами:

1. Создание нового матча
2. Просмотр законченных матчей, поиск матчей по именам игроков
3. Подсчёт очков в текущем матче
4. Подсчёт очков в теннисном матче

Для упрощения, допустим что каждый матч играется по следующим правилам:

Матч играется до двух сетов (best of 3)

При счёте 40/40 в сете, переход к счету "больше меньше"

# Интерфейс приложения

## Главная страница 

Ссылки, ведущие на страницы нового матча и списка завершенных матчей

Страница нового матча. Адрес - /new-match.

Интерфейс:

HTML форма с полями “Имя игрока 1”, “Имя игрока 2” и кнопкой “начать”. Для упрощения допустим, что имена игроков уникальны. Игрок не может играть сам с собой.

Нажатие кнопки “начать” приводить к POST запросу по адресу /new-match

Обработчик POST запроса:

Проверяет существование игроков в таблице Players. Если игрока с таким именем не существует, создаём

Создаём экземпляр класса Match (содержащий айди игроков и текущий счёт) и кладём в коллекцию текущих матчей (существующую только в памяти приложения, либо в key-value storage). Ключом коллекции является UUID, значением - экземпляр класса Match

Редирект на страницу /match-score?uuid=$match_id

## Страница счёта матча - /match-score

Адрес - /match-score?uuid=$match_id. GET параметр uuid содержит UUID матча.

Интерфейс:

Таблица с именами игроков, текущим счётом

Формы и кнопки для действий - “игрок 1 выиграл текущее очко”, “игрок 2 выиграл текущее очко”

Нажатие кнопок приводит к POST запросу по адресу /match-score?uuid=$match_id, в полях отправленной формы содержится айди выигравшего очко игрока

Обработчик POST запроса:

Извлекает из коллекции экземпляр класса Match

В соответствии с тем, какой игрок выиграл очко, обновляет счёт матча

Если матч не закончился - рендерится таблица счёта матча с кнопками, описанными выше

Если матч закончился:

Удаляем матч из коллекции текущих матчей

Записываем законченный матч в SQL базу данных

Рендерим финальный счёт

## Страница сыгранных матчей - /matches #

Адрес - /matches?page=$page_number&filter_by_player_name=$player_name. GET параметры:

page - номер страницы. Если параметр не задан, подразумевается первая страница

filter_by_player_name - имя игрока, матчи которого ищем. Если параметр не задан, отображаются все матчи

Постранично отображает список сыгранных матчей. Позволяет искать матчи игрока по его имени. Для постраничного отображения потребуется реализация пагинации.

Интерфейс:

Форма с фильтром по имени игрока. Поле ввода для имени и кнопка “искать”. По нажатию формируется GET запрос вида /matches?filter_by_player_name=${NAME}

Список найденных матчей

Переключатель страниц, если матчей найдено больше, чем влезает на одну страницу

# Схема бд

## Таблица Players - игроки 

Имя колонки	Тип	Комментарий

ID	Int	Первичный ключ, автоинкремент

Name	Varchar	Имя игрока

Индексы:

Уникальный индекс колонки Name для эффективности поиска игроков по имени и запрета повторяющихся имён

## Таблица Matches - завершенные матчи

Для упрощения, в БД сохраняются только доигранные матчи в момент их завершения.

Имя колонки	Тип	Комментарий

ID	Int	Первичный ключ, автоинкремент

Player1	Int	Айди первого игрока, внешний ключ на Players.ID

Player2	Int	Айди второго игрока, внешний ключ на Players.ID

Winner	Int	Айди победителя, внешний ключ на Players.ID

# Деплой

Вручную деплоим war артефакт в Tomcat. При использовании базы данных H2, установка внешней SQL БД не требуется.
